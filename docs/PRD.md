# PRD: FAA Strategy Calculator

> **Product Requirements Document**  
> Version: 1.0 | Date: 2026-01-07 | Author: AI Consultant

---

## MVP 캡슐 (12줄)

```
1. 목표(Outcome): FAA 전략 기반 투자 스코어링 자동화로 매월 리밸런싱 의사결정 시간 절감
2. 페르소나: ETF 투자를 원하지만 종목 선정이 어려운 30대 직장인
3. 핵심 가치 제안: 7개 종목의 FAA 스코어를 1분 내에 계산하고 최적 투자 비중을 제안
4. EPIC-1: 사용자가 원하는 종목군으로 FAA 스코어를 계산하고 투자 가이드를 받는다
5. FEAT-1: 7개 티커 입력 → 스코어 계산 → 상위 3개 종목 및 투자 비중 표시
6. 노스스타 지표: DAU 100명
7. 입력 지표: (1) 스코어 계산 완료율 (2) 재방문율
8. Non-goals: 로그인, 이메일 알림, 다중 포트폴리오, 백테스트 저장, 환율 변환
9. NFR Top 2: (1) 응답시간 10초 이내 (2) 가용성 99%
10. 데이터 민감도: 없음 (PII 수집 없음, LocalStorage만 사용)
11. Top 리스크: yfinance 상업 라이선스 → MVP 후 유료 API 전환 검토
12. 다음 7일 액션: 프로젝트 세팅 + 스코어 계산 API 구현 + 기본 UI
```

---

## 1. Problem Statement

### 배경
- 개인 투자자들이 FAA(Flexible Asset Allocation) 전략을 활용하고 싶지만, 매월 수동으로 모멘텀/변동성/상관성을 계산하는 것은 시간 소모적이고 오류가 발생하기 쉬움
- 기존 도구들은 복잡하거나 유료이며, 간단히 "어떤 종목에 얼마를 투자할지"를 알려주지 않음

### 해결하고자 하는 문제
- **P1**: 사용자가 원하는 종목군에 대해 FAA 스코어를 빠르게 계산할 수 없음
- **P2**: 투자 금액 대비 종목별 배분을 수동으로 계산해야 함
- **P3**: 전략의 과거 성과를 검증할 방법이 없음

---

## 2. Goals & Non-Goals

### Goals (이번 MVP에서 달성할 것)
| ID | Goal | 측정 방법 |
|----|------|----------|
| G-1 | 7개 종목의 FAA 스코어를 10초 내에 계산 | API 응답 시간 측정 |
| G-2 | 투자 금액 입력 시 종목별 배분 금액 제안 | 기능 완성 여부 |
| G-3 | 5년 이상의 백테스트 결과 시각화 | 차트 렌더링 확인 |
| G-4 | DAU 100명 달성 | GA/Vercel Analytics |

### Non-Goals (명시적으로 하지 않음)
| ID | Non-Goal | 이유 |
|----|----------|------|
| NG-1 | 로그인/회원가입 | MVP 범위 축소 |
| NG-2 | 이메일 리밸런싱 알림 | 서버 복잡도 증가 |
| NG-3 | 다중 포트폴리오 저장 | 1개 활성 종목군만 지원 |
| NG-4 | 백테스트 결과 저장 | 매번 새로 실행 |
| NG-5 | KRW ↔ USD 환율 변환 | USD only |
| NG-6 | 모바일 앱 | 웹 only |

---

## 3. Personas & Use Cases

### 페르소나 A: 김재테크 (Primary)
- **프로필**: 32세, IT 회사 개발자, 월 급여의 30%를 투자
- **투자 경험**: 2년차, 개별주 실패 경험 후 ETF로 전환
- **페인포인트**: 
  - 어떤 ETF를 사야 할지 모르겠음
  - 시장 상승기엔 따라가고 싶고, 하락기엔 현금 보유하고 싶음
  - 매달 엑셀로 계산하는 게 귀찮음
- **니즈**: 간단히 종목 입력하면 "이거 사세요"라고 알려주는 도구

### Use Case 시나리오

#### UC-1: 스코어 계산 및 투자 종목 확인
1. 사용자가 7개 티커를 입력 (또는 기본값 사용)
2. "계산하기" 버튼 클릭
3. 시스템이 4개월 데이터로 모멘텀/변동성/상관성 계산
4. 통합 스코어 기준 상위 3개 종목 표시
5. 절대 모멘텀 필터 적용 (음수면 현금 대체)
6. 사용자가 결과 확인

#### UC-2: 투자 금액 배분
1. UC-1 완료 후, 투자 금액(USD) 입력
2. 시스템이 선정된 종목에 균등 배분 계산
3. "VTI: $3,333 / VEA: $3,333 / SHY(현금): $3,333" 형태로 표시

#### UC-3: 백테스트 실행
1. 종목군 설정 상태에서 "백테스트" 탭 클릭
2. 시작일 선택 (최대 5년 전)
3. 시스템이 월별 리밸런싱 시뮬레이션 실행
4. 누적 수익률 차트 + 성과 지표 표시

---

## 4. Functional Requirements

### EPIC-1: FAA 스코어 계산 및 투자 가이드

#### FEAT-1: 종목 입력 및 스코어 계산
| REQ ID | 요구사항 | 수용 기준 |
|--------|----------|-----------|
| REQ-1.1 | 사용자는 7개의 티커 심볼을 입력할 수 있다 | 7개 입력 필드, 각 필드 유효성 검사 |
| REQ-1.2 | 티커 입력 시 실시간으로 유효성을 검증한다 | yfinance API로 존재 여부 확인, 2초 내 응답 |
| REQ-1.3 | 기본 종목군(VTI, VEA, VWO, SHY, BND, GSG, VNQ)을 제공한다 | 버튼 클릭으로 자동 채움 |
| REQ-1.4 | 종목군을 브라우저에 저장하고 재방문 시 불러온다 | LocalStorage 사용 |

#### FEAT-2: FAA 점수 계산
| REQ ID | 요구사항 | 수용 기준 |
|--------|----------|-----------|
| REQ-2.1 | 최근 4개월(80 거래일) 데이터로 모멘텀 계산 | (현재가/4개월전가격) - 1 |
| REQ-2.2 | 최근 4개월 일별 수익률의 표준편차로 변동성 계산 | 소수점 4자리 |
| REQ-2.3 | 각 종목과 나머지 6개 종목 간 상관계수 합계로 상관성 계산 | Pearson correlation |
| REQ-2.4 | 순위 산정: 모멘텀(내림), 변동성(오름), 상관성(오름) | 1위가 최고 |
| REQ-2.5 | 통합 점수 = 모멘텀순위×1.0 + 변동성순위×0.5 + 상관성순위×0.5 | 공식 적용 |
| REQ-2.6 | 통합 점수 기준 상위 3개 종목 선정 | 낮은 점수가 우수 |
| REQ-2.7 | 절대 모멘텀 필터: 모멘텀 < 0이면 현금(SHY) 대체 | 필터 적용 |

#### FEAT-3: 투자 금액 배분
| REQ ID | 요구사항 | 수용 기준 |
|--------|----------|-----------|
| REQ-3.1 | 투자 금액(USD)을 입력받는다 | 숫자만 허용, 양수 검증 |
| REQ-3.2 | 선정된 종목에 균등 배분 금액을 계산한다 | 총액 / 종목수 |
| REQ-3.3 | 종목별 배분 금액을 소수점 2자리까지 표시한다 | $3,333.33 형식 |

#### FEAT-4: 결과 시각화
| REQ ID | 요구사항 | 수용 기준 |
|--------|----------|-----------|
| REQ-4.1 | 전체 종목의 점수 테이블을 표시한다 | 티커, 모멘텀, 변동성, 상관성, 순위, 통합점수 |
| REQ-4.2 | 상위 3개 종목을 하이라이트 표시한다 | 배경색 또는 뱃지 |
| REQ-4.3 | 절대 모멘텀 필터 적용 여부를 표시한다 | "현금 대체" 라벨 |

### EPIC-2: 백테스트

#### FEAT-5: 백테스트 실행
| REQ ID | 요구사항 | 수용 기준 |
|--------|----------|-----------|
| REQ-5.1 | 시작일을 선택할 수 있다 (최대 5년 전) | DatePicker UI |
| REQ-5.2 | 월 1회 리밸런싱 기준으로 시뮬레이션한다 | 매월 말 기준 |
| REQ-5.3 | 누적 수익률 차트를 표시한다 | Line chart, Recharts |
| REQ-5.4 | 성과 지표를 표시한다 | CAGR, MDD, Sharpe Ratio |
| REQ-5.5 | 벤치마크(SPY) 대비 수익률을 비교한다 | 차트에 오버레이 |

### EPIC-3: 광고 및 수익화

#### FEAT-6: 애드센스 통합
| REQ ID | 요구사항 | 수용 기준 |
|--------|----------|-----------|
| REQ-6.1 | 페이지에 Google AdSense 배너를 표시한다 | 헤더/사이드/푸터 중 선택 |
| REQ-6.2 | 광고가 주요 콘텐츠를 가리지 않는다 | UX 검증 |

---

## 5. Success Metrics

### 노스스타 지표
- **DAU 100명** (런칭 후 3개월 내 달성 목표)

### 입력 지표 (Leading Indicators)
| 지표 | 정의 | 목표 |
|------|------|------|
| 스코어 계산 완료율 | 계산 버튼 클릭 → 결과 표시까지 완료한 비율 | > 90% |
| 재방문율 | 7일 내 재방문 사용자 비율 | > 30% |

### 보조 지표
| 지표 | 정의 |
|------|------|
| 평균 세션 시간 | 사용자당 평균 체류 시간 |
| 백테스트 사용률 | 스코어 계산 후 백테스트 실행 비율 |
| 광고 클릭률 (CTR) | 광고 노출 대비 클릭 비율 |

---

## 6. Assumptions & Risks

### Assumptions (가정)
| ID | 가정 | 검증 방법 |
|----|------|----------|
| A-1 | 사용자는 FAA 전략의 기본 개념을 알고 있다 | 온보딩 없이 사용 가능 여부 관찰 |
| A-2 | yfinance가 계속 무료로 데이터를 제공한다 | 분기별 API 상태 점검 |
| A-3 | 10명 이하의 동시 사용자로 충분하다 | Vercel 로그 모니터링 |

### Risks (리스크)
| ID | 리스크 | 영향 | 확률 | 완화 전략 |
|----|--------|------|------|----------|
| RISK-1 | yfinance ToS 위반으로 차단 | 서비스 중단 | 중 | 유료 API 전환 준비 |
| RISK-2 | 10초 내 응답 실패 (5년 데이터) | UX 저하 | 중 | 로딩 UI + 데이터 캐싱 |
| RISK-3 | 1인 개발로 일정 지연 | 런칭 지연 | 중 | 스콥 엄격 관리 |
| RISK-4 | 계산 오류로 잘못된 투자 가이드 | 신뢰도 하락 | 저 | 단위 테스트 + 수동 검증 |

---

## 7. Release Scope & Milestones

### MVP Milestone (v1.0)
| 단계 | 기간 | 산출물 |
|------|------|--------|
| M0: 프로젝트 세팅 | 1일 | Next.js + Vercel + Python API 구조 |
| M1: 스코어 계산 API | 2일 | /api/score 엔드포인트 |
| M2: 메인 UI | 2일 | 종목 입력 + 결과 테이블 |
| M3: 투자 배분 | 1일 | 금액 입력 + 배분 결과 |
| M4: 백테스트 | 2일 | /api/backtest + 차트 |
| M5: 광고 통합 | 0.5일 | AdSense 배너 |
| M6: QA & 배포 | 1.5일 | 버그 수정, 프로덕션 배포 |

**예상 총 기간: 10일**

### Post-MVP (고려사항)
- 다중 포트폴리오 지원
- 리밸런싱 알림 (이메일)
- 커스텀 파라미터 (관측 기간, 리밸런싱 주기)
- 유료 API 전환

---

## 8. Decision Log (Reference)

전체 35개 결정 사항은 [TRD.md](file:///Users/yunjihwan/.gemini/antigravity/brain/9d420c35-8a71-4e40-8d28-3bc9f52216cb/TRD.md) 참조

---

## 9. Appendix

### FAA 전략 핵심 공식

```
모멘텀(M) = (현재가 / 4개월전 가격) - 1
변동성(V) = std(일별 수익률, 80일)
상관성(C) = Σ corr(자산i, 자산j) for j ≠ i

통합 점수 = M순위×1.0 + V순위×0.5 + C순위×0.5

선정: 통합 점수 낮은 상위 3개
필터: M < 0 이면 현금(SHY) 대체
배분: 균등 분배 (1/3씩)
```
